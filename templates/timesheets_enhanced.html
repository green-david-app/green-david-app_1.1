{% extends "layout.html" %}
{% block content %}
<div class="page">
  <div class="container">
    <!-- Page Header -->
    <div class="ts-page-header">
      <h1 class="ts-page-title">VÃ½kazy hodin</h1>
      <p class="ts-page-subtitle">ModernÃ­ timeline view s barevnÃ½m kÃ³dovÃ¡nÃ­m a statistikami</p>
    </div>

    <!-- View Toggle -->
    <div class="ts-view-toggle">
      <button id="viewList" class="ts-view-btn active">ğŸ“‹ Seznam</button>
      <button id="viewTimeline" class="ts-view-btn">ğŸ“… Timeline</button>
      <button id="viewStats" class="ts-view-btn">ğŸ“Š Statistiky</button>
    </div>

    <!-- Toolbar -->
    <div class="ts-toolbar">
      <div class="ts-week-nav">
        <button id="prevWeek" class="ts-nav-btn">â† PÅ™edchozÃ­</button>
        <div id="weekLabel" class="ts-week-label">23. - 29. prosince 2025</div>
        <button id="nextWeek" class="ts-nav-btn">DalÅ¡Ã­ â†’</button>
      </div>
      <div class="ts-actions">
        <button id="toggleFilters" class="btn btn-secondary">ğŸ” Filtry</button>
        <button id="bulkActions" class="btn btn-secondary" style="display:none;">âš™ï¸ HromadnÃ© akce</button>
        <button id="exportCsv" class="btn btn-secondary">ğŸ“Š Export</button>
        <button id="copyWeek" class="btn btn-secondary">ğŸ“‹ KopÃ­rovat tÃ½den</button>
        <button id="addTimesheet" class="btn btn-primary">+ PÅ™idat vÃ½kaz</button>
      </div>
    </div>

    <!-- Enhanced Filters -->
    <div id="filtersPanel" class="ts-filters-panel" style="display:none;">
      <div class="ts-filter-group">
        <label>RychlÃ© filtry:</label>
        <button class="ts-quick-filter" data-filter="thisWeek">Tento tÃ½den</button>
        <button class="ts-quick-filter" data-filter="lastWeek">MinulÃ½ tÃ½den</button>
        <button class="ts-quick-filter" data-filter="thisMonth">Tento mÄ›sÃ­c</button>
        <button class="ts-quick-filter" data-filter="myTime">MÅ¯j Äas</button>
      </div>
      <div class="ts-filter-group">
        <label>Datum:</label>
        <input id="dateFrom" type="date" class="form-input"/>
        <span>â€”</span>
        <input id="dateTo" type="date" class="form-input"/>
      </div>
      <div class="ts-filter-group">
        <label>ZamÄ›stnanci (multi-select):</label>
        <div id="employeeMultiSelect" class="ts-multi-select"></div>
      </div>
      <div class="ts-filter-group">
        <label>Projekty (multi-select):</label>
        <div id="jobMultiSelect" class="ts-multi-select"></div>
      </div>
    </div>

    <!-- Project Color Legend -->
    <div id="projectLegend" class="ts-legend">
      <div class="ts-legend-title">BarevnÃ© kÃ³dovÃ¡nÃ­ projektÅ¯:</div>
      <div id="legendItems" class="ts-legend-items"></div>
    </div>

    <!-- Enhanced Summary Bar -->
    <div class="ts-summary-bar">
      <div class="ts-summary-item">
        <div class="ts-summary-label">Celkem hodin</div>
        <div id="summaryTotal" class="ts-summary-value">0h</div>
      </div>
      <div class="ts-summary-item">
        <div class="ts-summary-label">PrÅ¯mÄ›r na den</div>
        <div id="summaryAvg" class="ts-summary-value">0h</div>
      </div>
      <div class="ts-summary-item">
        <div class="ts-summary-label">AktivnÃ­ch projektÅ¯</div>
        <div id="summaryProjects" class="ts-summary-value">0</div>
      </div>
      <div class="ts-summary-item">
        <div class="ts-summary-label">Overtime</div>
        <div id="summaryOvertime" class="ts-summary-value" style="color:var(--text-secondary);">0h</div>
      </div>
      <div class="ts-summary-item">
        <div class="ts-summary-label">vs. minulÃ½ tÃ½den</div>
        <div id="summaryTrend" class="ts-summary-value" style="color:var(--text-secondary);">â€”</div>
      </div>
    </div>

    <!-- Heat Map Week -->
    <div id="heatMapWeek" class="ts-heatmap">
      <div class="ts-heatmap-title">Vizualizace zatÃ­Å¾enÃ­ tÃ½dne</div>
      <div id="heatMapDays" class="ts-heatmap-days"></div>
    </div>

    <!-- Statistics Panel -->
    <div id="statsPanel" class="ts-stats-panel" style="display:none;">
      <div class="ts-stats-grid">
        <div class="ts-stat-card">
          <div class="ts-stat-title">Rozpad hodin po projektech</div>
          <div id="donutChart" class="ts-chart"></div>
        </div>
        <div class="ts-stat-card">
          <div class="ts-stat-title">Trend hodin (4 tÃ½dny)</div>
          <div id="lineChart" class="ts-chart"></div>
        </div>
        <div class="ts-stat-card">
          <div class="ts-stat-title">Top 5 projektÅ¯ tento tÃ½den</div>
          <div id="topProjects" class="ts-top-list"></div>
        </div>
      </div>
    </div>

    <!-- Timeline View -->
    <div id="timelineView" class="ts-timeline-view" style="display:none;">
      <div class="ts-timeline-header">
        <div class="ts-timeline-time-col">ÄŒas</div>
        <div class="ts-timeline-days">
          <div class="ts-timeline-day" data-day="0">Po</div>
          <div class="ts-timeline-day" data-day="1">Ãšt</div>
          <div class="ts-timeline-day" data-day="2">St</div>
          <div class="ts-timeline-day" data-day="3">ÄŒt</div>
          <div class="ts-timeline-day" data-day="4">PÃ¡</div>
          <div class="ts-timeline-day" data-day="5">So</div>
          <div class="ts-timeline-day" data-day="6">Ne</div>
        </div>
      </div>
      <div class="ts-timeline-body">
        <div class="ts-timeline-hours">
          <!-- Hours 8:00 - 18:00 will be generated -->
        </div>
        <div class="ts-timeline-grid">
          <!-- Timeline blocks will be generated here -->
        </div>
      </div>
    </div>

    <!-- List View (Original) -->
    <div id="listView" class="ts-list-view">
      <div id="weekGrid" class="ts-week-grid"></div>
    </div>
  </div>
</div>

<!-- Floating Action Button (Mobile) -->
<button id="fabAdd" class="ts-fab" style="display:none;">
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <line x1="12" y1="5" x2="12" y2="19"></line>
    <line x1="5" y1="12" x2="19" y2="12"></line>
  </svg>
</button>

<!-- Modal -->
<div id="modal" class="modal-backdrop" style="display:none;">
  <div class="card modal-card">
    <div class="card-h">
      <div id="modalTitle" class="modal-title">upravit zÃ¡znam</div>
    </div>
    <div class="card-c">
      <div class="form-grid">
        <input type="hidden" id="mId"/>
        <div class="form-group">
          <label class="form-label">zamÄ›stnanec</label>
          <select id="mEmployee" class="form-select"></select>
        </div>
        <div class="form-group">
          <label class="form-label">zakÃ¡zka</label>
          <select id="mJob" class="form-select"></select>
        </div>
        <div class="form-group">
          <label class="form-label">datum</label>
          <input id="mDate" type="date" class="form-input"/>
        </div>
        <div class="form-group">
          <label class="form-label">hodin</label>
          <input id="mHours" type="number" min="0" step="0.25" placeholder="8" class="form-input"/>
        </div>
        <div class="form-group">
          <label class="form-label">mÃ­sto</label>
          <input id="mPlace" type="text" class="form-input"/>
        </div>
        <div class="form-group span2">
          <label class="form-label">Äinnost</label>
          <textarea id="mActivity" rows="2" class="form-textarea"></textarea>
        </div>
      </div>
    </div>
    <div class="card-f actions">
      <button id="mDelete" class="btn btn-danger" style="margin-right:auto;display:none;">smazat</button>
      <button id="mCopy" class="btn btn-secondary" style="margin-right:auto;display:none;">ğŸ“‹ KopÃ­rovat</button>
      <button id="mCancel" class="btn btn-ghost">zruÅ¡it</button>
      <button id="mSave" class="btn btn-primary">uloÅ¾it</button>
    </div>
  </div>
</div>

<!-- Quick Add Modal -->
<div id="quickAddModal" class="modal-backdrop" style="display:none;">
  <div class="card modal-card" style="max-width:400px;">
    <div class="card-h">
      <div class="modal-title">RychlÃ© pÅ™idÃ¡nÃ­</div>
    </div>
    <div class="card-c">
      <div class="form-grid">
        <div class="form-group">
          <label class="form-label">zakÃ¡zka</label>
          <select id="qaJob" class="form-select"></select>
        </div>
        <div class="form-group">
          <label class="form-label">hodin</label>
          <input id="qaHours" type="number" min="0" step="0.25" placeholder="8" class="form-input"/>
        </div>
        <div class="form-group span2">
          <label class="form-label">Äinnost</label>
          <textarea id="qaActivity" rows="2" class="form-textarea" placeholder="Popis Äinnosti..."></textarea>
        </div>
      </div>
    </div>
    <div class="card-f actions">
      <button id="qaCancel" class="btn btn-ghost">zruÅ¡it</button>
      <button id="qaSave" class="btn btn-primary">uloÅ¾it</button>
    </div>
  </div>
</div>

<style>
  /* Enhanced Styles - will be added in next part */
  .ts-view-toggle {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
  }
  .ts-view-btn {
    padding: 8px 16px;
    background: var(--bg-card);
    border: 1px solid var(--border-medium);
    border-radius: 8px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s;
  }
  .ts-view-btn.active {
    background: var(--mint);
    color: var(--text-dark);
    border-color: var(--mint);
  }
  /* More styles will be added... */
</style>

<script>
// Enhanced JavaScript will be added
// This is a placeholder - full implementation follows
</script>

{% endblock %}

