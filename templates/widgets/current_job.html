<div class="current-job-widget">
    {% if context and context.current_job %}
        <div class="job-card">
            <div class="job-header">
                <span class="job-number">#{{ context.current_job.id }}</span>
                <span class="job-status status-{{ context.current_job.status|lower|replace(' ', '-') }}">
                    {{ context.current_job.status or 'Aktivní' }}
                </span>
            </div>
            <h4 class="job-name">{{ context.current_job.title or context.current_job.name or context.current_job.client or 'Bez názvu' }}</h4>
            {% if context.current_job.city %}
            <p class="job-location">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                    <circle cx="12" cy="10" r="3"/>
                </svg>
                {{ context.current_job.city }}
            </p>
            {% endif %}
            <div class="job-actions">
                <button class="btn btn-sm" onclick="changeJob()">Změnit zakázku</button>
            </div>
        </div>
    {% else %}
        <div class="no-job">
            <p>Žádná aktivní zakázka</p>
            <button class="btn btn-primary" onclick="selectJob()">Vybrat zakázku</button>
        </div>
    {% endif %}
</div>

<script>
function changeJob() {
    // TODO: Implementovat výběr zakázky
    alert('Výběr zakázky bude implementován');
}

function selectJob() {
    // TODO: Implementovat výběr zakázky
    window.location.href = '/jobs.html';
}
</script>
