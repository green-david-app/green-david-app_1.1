<div class="budget-burn-widget">
    {% if budget_data %}
        <div class="budget-summary">
            <div class="budget-item">
                <span class="budget-label">Rozpočet</span>
                <span class="budget-value">{{ budget_data.total_budget or 0 }} Kč</span>
            </div>
            <div class="budget-item">
                <span class="budget-label">Čerpáno</span>
                <span class="budget-value spent">{{ budget_data.spent or 0 }} Kč</span>
            </div>
            <div class="budget-item">
                <span class="budget-label">Zbývá</span>
                <span class="budget-value remaining">{{ budget_data.remaining or 0 }} Kč</span>
            </div>
        </div>
        
        <div class="burn-chart">
            <div class="burn-bar">
                <div class="burn-fill" style="width: {{ budget_data.percent_spent or 0 }}%"></div>
            </div>
            <span class="burn-percent">{{ budget_data.percent_spent or 0 }}%</span>
        </div>
        
        {% if budget_data.jobs %}
        <div class="top-spenders">
            <h4>Největší čerpání</h4>
            {% for job in budget_data.jobs[:3] %}
            <div class="spender-item">
                <span class="spender-name">{{ job.name or job.title or '#' + job.id|string }}</span>
                <span class="spender-amount">{{ job.spent or 0 }} Kč</span>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    {% else %}
        <p class="empty-state">Žádná data o rozpočtu</p>
    {% endif %}
</div>

<style>
.budget-summary {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 16px;
}

.budget-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.budget-label {
    color: var(--text-secondary);
    font-size: 14px;
}

.budget-value {
    font-weight: 600;
    font-size: 16px;
}

.budget-value.spent {
    color: #fbbf24;
}

.budget-value.remaining {
    color: var(--mint);
}

.burn-chart {
    margin-bottom: 16px;
}

.burn-bar {
    height: 12px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: 8px;
}

.burn-fill {
    height: 100%;
    background: linear-gradient(90deg, #fbbf24, #ef4444);
    transition: width 0.3s;
}

.burn-percent {
    font-size: 14px;
    color: var(--text-secondary);
}

.top-spenders h4 {
    font-size: 14px;
    margin-bottom: 8px;
    color: var(--text-secondary);
}

.spender-item {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.spender-name {
    font-size: 14px;
}

.spender-amount {
    font-weight: 600;
    color: #fbbf24;
}
</style>
