
{% extends "base.html" %}
{% block content %}
<h1>Kalendář</h1>

<div class="calendar-controls">
  <button id="prevMonth" class="btn">&lt;</button>
  <div id="monthLabel" class="month-label"></div>
  <button id="nextMonth" class="btn">&gt;</button>
  <div class="spacer"></div>
  <button class="btn add" data-type="note">+ Poznámka</button>
  <button class="btn add" data-type="task">+ Úkol</button>
  <button class="btn add" data-type="job">+ Zakázka</button>
</div>

<div id="calendarGrid" class="calendar-grid"></div>

<!-- Modal -->
<dialog id="eventModal">
  <form method="dialog" id="eventForm" class="modal-form">
    <h3 id="modalTitle">Přidat záznam</h3>
    <label>Datum
      <input type="date" id="evDate" required>
    </label>
    <label>Nadpis
      <input type="text" id="evTitle" placeholder="Název" required>
    </label>
    <label>Podrobnosti
      <textarea id="evDetails" rows="3" placeholder="volitelné"></textarea>
    </label>
    <label>Barva
      <input type="color" id="evColor" value="#2e7d32">
    </label>
    <input type="hidden" id="evType" value="note">
    <menu>
      <button class="btn" value="cancel">Zrušit</button>
      <button class="btn primary" id="saveEvent" value="default">Uložit</button>
    </menu>
  </form>
</dialog>
<style>
  /* Scoped styles for day sheet – do not touch global layout */
  dialog#daySheet{border:none;border-radius:16px;padding:0;max-width:min(94vw,520px)}
  dialog#daySheet::backdrop{background:#0008}
  #sheetHead{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid #e0e0e0;background:#fff;color:#111}
  #sheetBody{padding:14px 16px;background:#fff;color:#111;max-height:70vh;overflow:auto}
  .sheet-item{display:flex;align-items:center;gap:10px;border:1px dashed #e0e0e0;padding:10px;border-radius:12px;margin:8px 0}
  .sheet-item .swatch{width:10px;height:10px;border-radius:50%}
  .sheet-item .meta{flex:1;min-width:0}
  .sheet-item .meta .t{font-weight:700}
  .sheet-item .meta .n{opacity:.75}
</style>
<dialog id="daySheet">
  <div id="sheetHead">
    <div id="sheetDate">Den</div>
    <button class="btn" onclick="document.getElementById('daySheet').close()">Zavřít</button>
  </div>
  <div id="sheetBody"></div>
</dialog>

<script src="{{ url_for('static', filename='js/calendar.js') }}"></script>
{% endblock %}
