
{% extends "base.html" %}
{% block content %}
<h1>Kalendář</h1>
<div class="calendar-nav">
  <a class="btn" href="/calendar?y={{prev_y}}&m={{prev_m}}">◀︎</a>
  <div class="month">{{ m }}/{{ y }}</div>
  <a class="btn" href="/calendar?y={{next_y}}&m={{next_m}}">▶︎</a>
</div>

<div class="calendar-grid">
  {% for wd in ['Po','Út','St','Čt','Pá','So','Ne'] %}
    <div class="dow">{{ wd }}</div>
  {% endfor %}
  {% for day in grid %}
    <div class="cell {% if day.month != m %}dim{% endif %} {% if day == today %}today{% endif %}">
      <div class="date">{{ day.day }}</div>
      {% for e in events_by_day.get(day, []) %}
        <div class="event">{{ e.title }}</div>
      {% endfor %}
      {% if day.month == m %}
      <form method="post" action="/calendar/add" class="add-form">
        <input type="hidden" name="date" value="{{ day.isoformat() }}">
        <input type="text" name="title" placeholder="Název" required>
        <input type="text" name="note" placeholder="Poznámka">
        <button type="submit">+</button>
      </form>
      {% endif %}
    </div>
  {% endfor %}
</div>
{% endblock %}
