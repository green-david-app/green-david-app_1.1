
{% extends "base.html" %}
{% block content %}
<h1>Výkazy</h1>

<form method="get" action="/timesheets" class="row">
  <label>Zaměstnanec:</label>
  <select name="employee_id" onchange="this.form.submit()">
    <option value="">(všichni)</option>
    {% for e in employees %}
      <option value="{{e.id}}" {% if emp_id == e.id %}selected{% endif %}>{{e.name}}</option>
    {% endfor %}
  </select>
  <a class="btn" href="/timesheets/export.csv{% if emp_id %}?employee_id={{emp_id}}{% endif %}">Export CSV</a>
</form>

<h2>Přidat záznam</h2>
<form method="post" action="/timesheets/add" class="row">
  <label>Zaměstnanec ID</label>
  <input type="number" name="employee_id" required>
  <label>Datum</label>
  <input type="date" name="date" required>
  <label>Hodiny</label>
  <input type="number" step="0.25" name="hours" required>
  <label>Poznámka</label>
  <input type="text" name="note">
  <button type="submit" class="btn">Uložit</button>
</form>

<h2>Položky</h2>
<table class="table">
  <thead><tr><th>ID</th><th>Zaměstnanec</th><th>Datum</th><th>Hodiny</th><th>Poznámka</th></tr></thead>
  <tbody>
  {% for t in times %}
    <tr>
      <td>{{t.id}}</td>
      <td>{{t.employee_id}}</td>
      <td>{{t.date}}</td>
      <td>{{'%.2f'|format(t.hours)}}</td>
      <td>{{t.note}}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
