/* Mobile Patch v4 â€” decisive fixes
   - Adds stronger specificity and !important to override legacy styles
   - Separates header/month controls from action buttons
   - Ensures rightmost column is not clipped by rounded container
   - Forces event chips to wrap and keep action buttons visible
*/

/* Global overflow safety */
html, body { max-width: 100% !important; overflow-x: hidden !important; }

/* View padding */
@media (max-width: 768px){
  .content, .page, main, .container { padding-left: 14px !important; padding-right: 14px !important; }
}

/* ===== Header & Actions ===== */
@media (max-width: 768px){
  .calendar .month-header, .month-header { 
    display: grid !important;
    grid-template-columns: auto 1fr auto !important;
    align-items: center !important;
    gap: 8px !important;
    margin-bottom: 6px !important;
  }
  /* actions occupy a new row */
  .calendar-actions, .toolbar, .action-bar {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 8px !important;
    width: 100% !important;
    margin: 8px 0 0 0 !important;
  }
  .calendar-actions > *, .toolbar > *, .action-bar > * {
    flex: 1 1 48% !important;
    min-width: 44% !important;
  }
}

/* ===== Calendar frame ===== */
.calendar, #calendar, .month-view, .calendar-panel {
  max-width: 100% !important;
  overflow: hidden !important;
  border-radius: 16px !important;
}

/* inner grid safety insets */
.calendar .calendar-grid, .calendar .month-grid, .calendar .grid-days,
#calendar .calendar-grid, #calendar .month-grid, #calendar .grid-days,
.month-view .calendar-grid, .month-view .month-grid, .month-view .grid-days,
.calendar-grid, .month-grid, .grid-days {
  display: grid !important;
  grid-template-columns: repeat(7, minmax(0, 1fr)) !important;
  gap: 8px !important;
  padding: 10px 16px 12px 16px !important;
  box-sizing: border-box !important;
  width: 100% !important;
}

/* day cells */
.calendar .day, #calendar .day, .month-view .day, .calendar-day, .grid-days .day, .month-grid .day, .calendar-grid .day {
  min-height: 62px !important;
  padding: 8px !important;
  border-radius: 10px !important;
  overflow: hidden !important;
  box-sizing: border-box !important;
}

@media (max-width: 640px){
  .calendar .day, #calendar .day, .month-view .day, .calendar-day { min-height: 56px !important; padding: 6px !important; }
}

/* ===== Events (text + close button) ===== */
.event, .event-item, .calendar-event, .day .event, .day .calendar-event {
  display: flex !important;
  align-items: center !important;
  gap: 6px !important;
  white-space: normal !important;
  overflow-wrap: anywhere !important;
  word-break: break-word !important;
  padding: 5px 8px !important;
  border-radius: 10px !important;
}

.event .title, .event .label, .calendar-event .title {
  flex: 1 1 auto !important;
  min-width: 0 !important;
}

.event .btn, .event button, .calendar-event .btn, .calendar-event button {
  margin-left: auto !important;
  flex: 0 0 auto !important;
}

/* Clamp to two lines on narrow screens */
@media (max-width: 768px){
  .event, .event-item, .calendar-event {
    display: -webkit-box !important;
    -webkit-box-orient: vertical !important;
    -webkit-line-clamp: 2 !important;
    overflow: hidden !important;
  }
  /* but keep the action button visible by allowing it to sit outside text flow */
  .event button, .calendar-event button { display: inline-flex !important; -webkit-line-clamp: initial !important; overflow: visible !important; }
}

/* Tables & generic scroll helpers */
.table-responsive, .scroll-x { overflow-x: auto !important; -webkit-overflow-scrolling: touch !important; }
table { width: 100% !important; border-collapse: collapse !important; }