/* Mobile Patch v5 — hard no-overflow + exact viewport fit */

/* 0) Absolute safety: everything measures with border-box */
*, *::before, *::after { box-sizing: border-box !important; }

/* 1) No horizontal scroll anywhere */
html, body { width: 100% !important; max-width: 100% !important; overflow-x: hidden !important; }

/* 2) Any generic container must not exceed viewport */
[class*="container"], .page, main, .content, .wrapper, .page-wrap {
  max-width: 100vw !important;
  width: 100% !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* 3) Kill framework negative margins on mobile (common Bootstrap-like rows) */
@media (max-width: 768px){
  .row, [class*="row"] {
    margin-left: 0 !important;
    margin-right: 0 !important;
  }
}

/* 4) Calendar panel: keep inside viewport and prevent right edge bleed */
.calendar, #calendar, .month-view, .calendar-panel {
  max-width: 100% !important;
  width: 100% !important;
  overflow: clip !important;              /* modern, prevents shadow bleed */
  border-radius: 16px !important;
}

/* 5) The grid itself must never be wider than its parent */
.calendar-grid, .month-grid, .grid-days,
.calendar .calendar-grid, .calendar .month-grid, .calendar .grid-days {
  width: 100% !important;
  max-width: 100% !important;
  display: grid !important;
  grid-template-columns: repeat(7, 1fr) !important;
  gap: 6px !important;
  padding: 8px 10px !important;           /* small internal inset, safe */
}

/* 6) Day cells — smaller radius so they never collide with panel corners */
.calendar-grid .day, .month-grid .day, .grid-days .day, .calendar-day, .day {
  min-height: 56px !important;
  padding: 6px !important;
  border-radius: 9px !important;
  overflow: hidden !important;
  max-width: 100% !important;
}

/* 7) Events: cap width and wrap text */
.event, .event-item, .calendar-event, .day .event, .day .calendar-event {
  max-width: 100% !important;
  white-space: normal !important;
  overflow-wrap: anywhere !important;
  word-break: break-word !important;
}
.event button, .calendar-event button { flex: 0 0 auto !important; }

/* 8) Fix any element that accidentally sets width > viewport */
[style*="width: 100vw"], [style*="width:100vw"] { width: 100% !important; }
img, svg, canvas, video { max-width: 100% !important; height: auto !important; display: block; }

/* 9) Header/actions: push action bar to its own row */
@media (max-width: 768px){
  .month-header { display: grid !important; grid-template-columns: auto 1fr auto !important; align-items: center !important; gap: 8px !important; }
  .calendar-actions, .toolbar, .action-bar { grid-column: 1 / -1 !important; width: 100% !important; display:flex !important; flex-wrap:wrap !important; gap:8px !important; margin-top: 8px !important; }
  .calendar-actions>* { flex: 1 1 48% !important; min-width: 44% !important; }
}

/* 10) Safety for iOS bottom bar area */
@supports (padding: max(0px)) {
  .content, .page, main { padding-bottom: max(16px, env(safe-area-inset-bottom)) !important; }
}