/* Calendar Hotfix 1.2 bootstrap (auto-template patch)\n   - Injects viewport + responsive.css if missing\n   - Ensures #calendar is wrapped in .calendar-wrapper\n   - iOS/Safari dayGrid overflow/overlap fixes\n*/\n(function(){\n  function ensureViewport(){\n    var head=document.head||document.getElementsByTagName('head')[0];\n    if(!head) return;\n    if(!document.querySelector('meta[name=\\"viewport\\"]')){\n      var m=document.createElement('meta');\n      m.setAttribute('name','viewport');\n      m.setAttribute('content','width=device-width, initial-scale=1');\n      head.appendChild(m);\n    }\n  }\n  function ensureResponsiveCss(){\n    var head=document.head||document.getElementsByTagName('head')[0];\n    if(!head) return;\n    var ok=[].slice.call(document.querySelectorAll('link[rel=\\"stylesheet\\"]'))\n      .some(function(l){return(l.getAttribute('href')||'').indexOf('/static/css/responsive.css')!==-1;});\n    if(!ok){\n      var link=document.createElement('link');\n      link.rel='stylesheet';\n      link.href='/static/css/responsive.css?v=1.2';\n      head.appendChild(link);\n    }\n  }\n  function ensureWrapper(){\n    var el=document.getElementById('calendar');\n    if(!el) return;\n    if(!el.parentElement || !el.parentElement.classList.contains('calendar-wrapper')){\n      var wrap=document.createElement('div');\n      wrap.className='calendar-wrapper';\n      el.parentNode.insertBefore(wrap, el);\n      wrap.appendChild(el);\n    }\n  }\n  function clampEventWidths(){\n    document.querySelectorAll('.fc-daygrid-event')\n      .forEach(function(el){ el.style.maxWidth='100%'; el.style.width='100%'; });\n  }\n  function setMobileOptions(){\n    if(window.innerWidth<=680 && window.FullCalendar){\n      var api=(document.querySelector('.fc')||{})._fullcalendar||window.gdCalendar;\n      try{ if(api&&api.setOption){ api.setOption('dayMaxEventRows',3); api.setOption('eventDisplay','block'); } }catch(e){}\n    }\n  }\n  if(typeof ResizeObserver!=='undefined'){ new ResizeObserver(clampEventWidths).observe(document.documentElement); }\n  document.addEventListener('DOMContentLoaded',function(){\n    ensureViewport(); ensureResponsiveCss(); ensureWrapper();\n    clampEventWidths(); setMobileOptions();\n  });\n  window.addEventListener('orientationchange',function(){ setTimeout(function(){ clampEventWidths(); setMobileOptions(); },250); });\n})();